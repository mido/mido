<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Messages &mdash; Mido 1.3.4.dev15+g59821b2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Backends" href="../backends/index.html" />
    <link rel="prev" title="Introduction (Basic Concepts)" href="../intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Mido
              <img src="../_static/mido.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Mido - MIDI Objects for Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction (Basic Concepts)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Details</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Messages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#control-changes">Control Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-to-from-bytes">Converting To &amp; From Bytes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#to-bytes">To Bytes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-bytes">From Bytes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-time-attribute">The Time Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-exclusive-messages">System Exclusive Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#frozen-messages">Frozen Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parsing-midi-bytes">Parsing MIDI Bytes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#serializing">Serializing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#string-encoding">String Encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#format">Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parsing">Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../backends/index.html">Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ports/index.html">Ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files/index.html">Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binaries.html">Included Programs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about_midi.html">About MIDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../message_types.html">Message Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta_message_types.html">Meta Message Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freezing_exe.html">Freezing to EXE File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Version Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses.html">Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Mido</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Messages</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/mido/mido/edit/main/docs/messages/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../intro.html" class="btn btn-neutral float-left" title="Introduction (Basic Concepts)" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../backends/index.html" class="btn btn-neutral float-right" title="Backends" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="messages">
<h1>Messages<a class="headerlink" href="#messages" title="Permalink to this heading"></a></h1>
<p>A Mido message is a Python object with methods and attributes. The
attributes will vary depending on message type.</p>
<p>To create a new message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="s1">&#39;note_on&#39;</span><span class="p">)</span>
<span class="go">Message(&#39;note_on&#39;, channel=0, note=0, velocity=64, time=0)</span>
</pre></div>
</div>
<p>You can pass attributes as keyword arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="s1">&#39;note_on&#39;</span><span class="p">,</span> <span class="n">note</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">velocity</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mf">6.2</span><span class="p">)</span>
<span class="go">Message(&#39;note_on&#39;, channel=0, note=100, velocity=3, time=6.2)</span>
</pre></div>
</div>
<p>All attributes will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
The exceptions are <code class="docutils literal notranslate"><span class="pre">velocity</span></code>, which defaults to <code class="docutils literal notranslate"><span class="pre">64</span></code> (middle velocity)
and <code class="docutils literal notranslate"><span class="pre">data</span></code> which defaults to <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p>
<p>You can set and get attributes as you would expect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="s1">&#39;note_on&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">note</span>
<span class="go">0</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute can be used to determine message type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">type</span>
<span class="go">&#39;note_on&#39;</span>
</pre></div>
</div>
<p>Attributes are also settable but it’s always better to use
<code class="docutils literal notranslate"><span class="pre">msg.copy()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">note</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mf">100.0</span><span class="p">)</span>
<span class="go">Message(&#39;note_on&#39;, channel=0, note=99, velocity=64, time=100.0)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mido always makes a copy of messages instead of modifying
them so if you do the same you have immutable messages in
practice. (Third party libraries may not follow the same
rule.)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="frozen.html"><span class="doc">Frozen Messages</span></a> are a variant of messages that are
hashable and can be used as dictionary keys. They are also
safe from tampering by third party libraries. You can freely
convert between the two and use frozen messages wherever
normal messages are allowed.</p>
</div>
<p>Mido supports all message types defined by the <a class="reference internal" href="../glossary.html#term-midi"><span class="xref std std-term">MIDI</span></a> standard. For a
full list of messages and their attributes, see <a class="reference internal" href="../message_types.html"><span class="doc">Message Types</span></a>.</p>
<section id="control-changes">
<h2>Control Changes<a class="headerlink" href="#control-changes" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">is_cc</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Control change message received&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">is_cc</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Volume changed to&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="converting-to-from-bytes">
<h2>Converting To &amp; From Bytes<a class="headerlink" href="#converting-to-from-bytes" title="Permalink to this heading"></a></h2>
<section id="to-bytes">
<h3>To Bytes<a class="headerlink" href="#to-bytes" title="Permalink to this heading"></a></h3>
<p>You can convert a message to <a class="reference internal" href="../glossary.html#term-midi"><span class="xref std std-term">MIDI</span></a> <code class="docutils literal notranslate"><span class="pre">bytes</span></code> with one of these methods:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="s1">&#39;note_on&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span>
<span class="go">Message(&#39;note_on&#39;, channel=0, note=0, velocity=64, time=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">bytes</span><span class="p">()</span>
<span class="go">[144, 0, 64]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">bin</span><span class="p">()</span>
<span class="go">bytearray(b&#39;\x90\x00@&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
<span class="go">&#39;90 00 40&#39;</span>
</pre></div>
</div>
</section>
<section id="from-bytes">
<h3>From Bytes<a class="headerlink" href="#from-bytes" title="Permalink to this heading"></a></h3>
<p>You can turn <code class="docutils literal notranslate"><span class="pre">bytes</span></code> back into messages with the <a class="reference internal" href="parsing.html"><span class="doc">parser</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.</span></p>
</div>
<p>You can also create a message from <code class="docutils literal notranslate"><span class="pre">bytes</span></code> using class methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msg1</span> <span class="o">=</span> <span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">([</span><span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">])</span>
<span class="n">msg2</span> <span class="o">=</span> <span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="o">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s1">&#39;90, 40 60&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">bytes</span></code> must contain exactly one complete message. If not
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised.</p>
</section>
</section>
<section id="the-time-attribute">
<h2>The Time Attribute<a class="headerlink" href="#the-time-attribute" title="Permalink to this heading"></a></h2>
<p>Each message has a <code class="docutils literal notranslate"><span class="pre">time</span></code> attribute, which can be set to any value
of type <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
<p>Some parts of Mido use the attribute for special purposes. In <code class="docutils literal notranslate"><span class="pre">MIDI</span> <span class="pre">file</span></code>
tracks, it is used as delta time (in <a class="reference internal" href="../glossary.html#term-ticks"><span class="xref std std-term">ticks</span></a>), and it must be a
non-negative integer.</p>
<p>In other parts of Mido, this value is ignored.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1.18: </span>In earlier versions, the <code class="docutils literal notranslate"><span class="pre">time</span></code> attribute was not included in
comparisons. If you want the old behavior the easiest way is
<code class="docutils literal notranslate"><span class="pre">msg1.bytes()</span> <span class="pre">==</span> <span class="pre">msg2.bytes()</span></code>.</p>
</div>
<p>To sort messages on time you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">messages</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">message</span><span class="p">:</span> <span class="n">message</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">operator</span>

<span class="n">messages</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="system-exclusive-messages">
<h2>System Exclusive Messages<a class="headerlink" href="#system-exclusive-messages" title="Permalink to this heading"></a></h2>
<p><a class="reference internal" href="../glossary.html#term-system-exclusive"><span class="xref std std-term">System Exclusive</span></a> (aka <a class="reference internal" href="../glossary.html#term-sysex"><span class="xref std std-term">SysEx</span></a>) messages are used to send device
specific data. The <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute is a tuple of data bytes which serves as
the payload of the message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s1">&#39;sysex&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span>
<span class="go">Message(&#39;sysex&#39;, data=(1, 2, 3), time=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
<span class="go">&#39;F0 01 02 03 F7&#39;</span>
</pre></div>
</div>
<p>You can also extend the existing data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s1">&#39;sysex&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span>
<span class="go">Message(&#39;sysex&#39;, data=(1, 2, 3, 4, 5, 6, 7, 8), time=0)</span>
</pre></div>
</div>
<p>Any sequence of integers between <cite>0</cite> and <cite>127</cite> is allowed, and type and range
checking is applied to each data byte.</p>
<p>These are all valid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">67</span><span class="p">)</span>
<span class="p">[</span><span class="mi">65</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">67</span><span class="p">]</span>
<span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">65</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;ABC&#39;</span><span class="p">)</span>
<span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>
<span class="sa">b</span><span class="s1">&#39;ABC&#39;</span>  <span class="c1"># Python 3 only.</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s1">&#39;sysex&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">+=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;DEF&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span>
<span class="go">Message(&#39;sysex&#39;, data=(65, 66, 67, 68, 69, 70), time=0)</span>
</pre></div>
</div>
</section>
<section id="frozen-messages">
<h2>Frozen Messages<a class="headerlink" href="#frozen-messages" title="Permalink to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.</span></p>
</div>
<p>Since Mido messages are <em>mutable</em> (can change) they can not be hashed or
put in dictionaries. This makes it hard to use them for things like
Markov chains.</p>
<p>In these situations you can use <em>frozen messages</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mido.frozen</span> <span class="kn">import</span> <span class="n">FrozenMessage</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">FrozenMessage</span><span class="p">(</span><span class="s1">&#39;note_on&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">msg</span><span class="p">:</span> <span class="s1">&#39;interesting&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p><em>Frozen messages</em> are used and behave in exactly the same way as normal
messages with one exception: <strong>attributes are not settable</strong>.</p>
<p>There are also variants for meta messages (<code class="docutils literal notranslate"><span class="pre">FrozenMetaMessage</span></code> and
<code class="docutils literal notranslate"><span class="pre">FrozenUnknownMetaMessage</span></code>).</p>
<p>You can <em>freeze</em> and <em>thaw</em> messages with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mido.frozen</span> <span class="kn">import</span> <span class="n">freeze_message</span><span class="p">,</span> <span class="n">thaw_message</span>

<span class="n">frozen</span> <span class="o">=</span> <span class="n">freeze_message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">thawed</span> <span class="o">=</span> <span class="n">thaw_message</span><span class="p">(</span><span class="n">frozen</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">thaw_message()</span></code> will always return a <em>copy</em>. Passing a <em>frozen message</em>
to <code class="docutils literal notranslate"><span class="pre">freeze_message()</span></code> will return the original message.</p>
<p>Both functions return <code class="docutils literal notranslate"><span class="pre">None</span></code> if you pass <code class="docutils literal notranslate"><span class="pre">None</span></code> which is handy for
things like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">freeze_message</span><span class="p">(</span><span class="n">port</span><span class="o">.</span><span class="n">receive</span><span class="p">())</span>

<span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="n">freeze_message</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>To check if a message is <em>frozen</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mido.frozen</span> <span class="kn">import</span> <span class="n">is_frozen</span>

<span class="k">if</span> <span class="n">is_frozen</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="parsing-midi-bytes">
<h2>Parsing MIDI Bytes<a class="headerlink" href="#parsing-midi-bytes" title="Permalink to this heading"></a></h2>
<p>The MIDI protocol is a <em>binary protocol</em>. Each message is encoded as a <em>status</em>
byte followed by up to three <em>data</em> bytes. (Except <a class="reference internal" href="../glossary.html#term-sysex"><span class="xref std std-term">SysEx</span></a> messages
which can have an arbitrary number of <em>data</em> bytes immediately followed by an
EOX status byte.)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2: </span><code class="docutils literal notranslate"><span class="pre">mido.Message.from_hex()</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To parse a single message you can use the class methods
<code class="docutils literal notranslate"><span class="pre">mido.Message.from_bytes()</span></code> and <code class="docutils literal notranslate"><span class="pre">mido.Message.from_hex()</span></code></p>
</div>
<p>Mido comes with a <em>parser</em> that turns MIDI bytes into messages. You can create
a <em>parser object</em> or call one of the <em>utility functions</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">parse</span><span class="p">([</span><span class="mh">0x92</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">])</span>
<span class="go">Message(&#39;note_on&#39;, channel=2, note=16, velocity=32, time=0)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">parse_all</span><span class="p">([</span><span class="mh">0x92</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">])</span>
<span class="go">[Message(&#39;note_on&#39;, channel=2, note=16, velocity=32, time=0),</span>
<span class="go"> Message(&#39;note_off&#39;, channel=2, note=16, velocity=32, time=0)]</span>
</pre></div>
</div>
<p>These functions are just shortcuts for the full <code class="docutils literal notranslate"><span class="pre">Parser</span></code> class. This
is the same parser as used inside input ports to parse incoming messages.
Here are a few examples of how it can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">mido</span><span class="o">.</span><span class="n">Parser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">feed</span><span class="p">([</span><span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">pending</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">get_message</span><span class="p">()</span>
<span class="go">Message(&#39;note_on&#39;, channel=0, note=16, velocity=32, time=0)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">feed_byte</span><span class="p">(</span><span class="mh">0x90</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">feed_byte</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">feed_byte</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">feed</span><span class="p">([</span><span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">pending</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">get_message</span><span class="p">()</span>
<span class="go">Message(&#39;note_on&#39;, channel=0, note=16, velocity=32, time=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">get_message</span><span class="p">()</span>
<span class="go">Message(&#39;note_off&#39;, channel=0, note=16, velocity=32, time=0)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">feed()</span></code> accepts any iterable that generates integers in 0..255. The
parser will skip and stray status bytes or data bytes, so you can
safely feed it random data and see what comes out the other end.</p>
<p><code class="docutils literal notranslate"><span class="pre">get_message()</span></code> will return <code class="docutils literal notranslate"><span class="pre">None</span></code> if there are no messages ready
to be gotten.</p>
<p>You can also fetch parsed messages out of the parser by iterating over
it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">feed</span><span class="p">([</span><span class="mh">0x92</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
<span class="gp">... </span>   <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="go">note_on channel=2 note=16 velocity=32 time=0</span>
<span class="go">note_off channel=2 note=16 velocity=32 time=0</span>
</pre></div>
</div>
<p>The messages are available in <code class="docutils literal notranslate"><span class="pre">p.messages</span></code> (a <code class="docutils literal notranslate"><span class="pre">collections.deque</span></code>).</p>
</section>
<section id="serializing">
<h2>Serializing<a class="headerlink" href="#serializing" title="Permalink to this heading"></a></h2>
<section id="string-encoding">
<h3>String Encoding<a class="headerlink" href="#string-encoding" title="Permalink to this heading"></a></h3>
<p>Mido messages can be serialized to a text format, which can be used to
safely store messages in text files, send them across sockets or embed
them in JSON, among other things.</p>
<p>To <em>encode</em> a message, simply call <code class="docutils literal notranslate"><span class="pre">str()</span></code> on it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cc</span> <span class="o">=</span> <span class="n">control_change</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">control</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">122</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
<span class="go">&#39;control_change channel=9 control=1 value=122 time=60&#39;</span>
</pre></div>
</div>
<p>To convert the other way (new method in 1.2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">Message</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="s1">&#39;control_change control=1 value=122&#39;</span><span class="p">)</span>
<span class="go">Message(&#39;control_change&#39;, channel=0, control=1, value=122, time=0)</span>
</pre></div>
</div>
<p>Alternatively, you can call the <code class="docutils literal notranslate"><span class="pre">format_as_string</span></code> function directly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">format_as_string</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
<span class="go">&#39;control_change channel=9 control=1 value=122 time=60&#39;</span>
</pre></div>
</div>
<p>If you don’t need the time attribute or you want to store it elsewhere, you
can pass <code class="docutils literal notranslate"><span class="pre">include_time=False</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mido</span><span class="o">.</span><span class="n">format_as_string</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
<span class="go">&#39;control_change channel=9 control=1 value=122&#39;</span>
</pre></div>
</div>
<p>(This option is also available in <code class="docutils literal notranslate"><span class="pre">mido.Message.from_str()</span></code>.)</p>
</section>
<section id="format">
<h3>Format<a class="headerlink" href="#format" title="Permalink to this heading"></a></h3>
<p>The format is simple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MESSAGE_TYPE</span> <span class="p">[</span><span class="n">PARAMETER</span><span class="o">=</span><span class="n">VALUE</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>These are the same as the arguments to <code class="docutils literal notranslate"><span class="pre">mido.Message()</span></code>. The order
of parameters doesn’t matter but each one can only appear once.</p>
<p>Only these characters will ever occur in a string encoded Mido message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span> <span class="o">=</span><span class="n">_</span><span class="o">.+</span><span class="p">()]</span>
</pre></div>
</div>
<p>or written out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;abcdefghijklmnopqrstuvwxyz0123456789 =_.+()&#39;</span>
</pre></div>
</div>
<p>This means the message can be embedded in most text formats without
any form of escaping.</p>
</section>
<section id="parsing">
<h3>Parsing<a class="headerlink" href="#parsing" title="Permalink to this heading"></a></h3>
<p>To <em>parse</em> a message, you can use <code class="docutils literal notranslate"><span class="pre">mido.parse_string()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_string</span><span class="p">(</span><span class="s1">&#39;control_change control=1 value=122 time=0.5&#39;</span><span class="p">)</span>
<span class="go">Message(&#39;control_change&#39;, channel=0, control=1, value=122, time=0.5)</span>
</pre></div>
</div>
<p>Parameters that are left out are set to their default
values. <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised if the message could not be
parsed. <em>Extra whitespace is ignored</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_string</span><span class="p">(</span><span class="s1">&#39;  control_change   control=1  value=122&#39;</span><span class="p">)</span>
<span class="go">Message(&#39;control_change&#39;, channel=0, control=1, value=122, time=0)</span>
</pre></div>
</div>
<p>To parse messages from a stream, you can use
<code class="docutils literal notranslate"><span class="pre">mido.messages.parse_string_stream()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="ow">in</span> <span class="n">parse_string_stream</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some_music.text&#39;</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">do_something_with</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>This will return every valid message in the stream. If a message could
not be parsed, <code class="docutils literal notranslate"><span class="pre">message</span></code> will be <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">error</span></code> will be an error
message describing what went wrong, as well as the line number where
the error occurred.</p>
<p>The argument to <code class="docutils literal notranslate"><span class="pre">parse_string_stream()</span></code> can be any object that
generates strings when iterated over, such as a file or a list.</p>
<p><code class="docutils literal notranslate"><span class="pre">parse_string_stream()</span></code> will ignore blank lines and comments (which
start with a <code class="docutils literal notranslate"><span class="pre">#</span></code> and go to the end of the line). An example of valid
input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># A very short song with an embedded sysex message.</span>
<span class="n">note_on</span> <span class="n">channel</span><span class="o">=</span><span class="mi">9</span> <span class="n">note</span><span class="o">=</span><span class="mi">60</span> <span class="n">velocity</span><span class="o">=</span><span class="mi">120</span> <span class="n">time</span><span class="o">=</span><span class="mi">0</span>
<span class="c1"># Send some data</span>

<span class="n">sysex</span> <span class="n">data</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.5</span>

<span class="n">pitchwheel</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">4000</span>  <span class="c1"># bend the not a little time=0.7</span>
<span class="n">note_off</span> <span class="n">channel</span><span class="o">=</span><span class="mi">9</span> <span class="n">note</span><span class="o">=</span><span class="mi">60</span> <span class="n">velocity</span><span class="o">=</span><span class="mi">60</span> <span class="n">time</span><span class="o">=</span><span class="mf">1.0</span>
</pre></div>
</div>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h3>
<p>An example of messages embedded into JSON:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;0.0 note_on channel=9 note=60 velocity=120&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;0.5 sysex data=(1,2,3)&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../intro.html" class="btn btn-neutral float-left" title="Introduction (Basic Concepts)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../backends/index.html" class="btn btn-neutral float-right" title="Backends" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ole Martin Bjørndalen
Raphaël Doursenaud.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>